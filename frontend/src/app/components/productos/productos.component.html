<div class="form-container">
  <h2>{{ productoEditandoIndex !== null ? 'Editar Producto' : 'Registrar Producto' }}</h2>

  <form [formGroup]="productoForm" (ngSubmit)="registrar()">
    <div class="form-group">
      <label for="nombre">Nombre</label>
      <input id="nombre" formControlName="nombre" type="text" placeholder="Ej. Galleta" />
    </div>

    <div class="form-group">
      <label for="precio">Precio</label>
      <input id="precio" formControlName="precio" type="number" placeholder="Ej. 2500" />
      <small *ngIf="productoForm.get('precio')?.invalid && productoForm.get('precio')?.touched">
        Ingrese un precio válido (mayor que 0).
      </small>
    </div>

    <div class="form-group">
      <label for="stock">Stock disponible</label>
      <input id="stock" formControlName="stock" type="number" placeholder="Ej. 30" />
      <small *ngIf="productoForm.get('stock')?.invalid && productoForm.get('stock')?.touched">
        Ingrese una cantidad válida.
      </small>
    </div>

    <button type="submit" [disabled]="productoForm.invalid">
      {{ productoEditandoIndex !== null ? 'Actualizar producto' : 'Registrar producto' }}
    </button>
  </form>

  <!-- Tabla de productos registrados -->
  <div class="productos-registrados" *ngIf="productosRegistrados.length > 0">
    <h3>Productos Registrados</h3>
    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Precio</th>
          <th>Stock</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let producto of productosRegistrados; let i = index">
          <td>{{ producto.nombre }}</td>
          <td>{{ producto.precio }}</td>
          <td>{{ producto.stock }}</td>
          <td>
            <button type="button" (click)="editarProducto(i)">Editar</button>
            <button type="button" (click)="eliminarProducto(i)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
